{"version":3,"file":"squirrelly.runtime.dev.js","sources":["../../src/helpers.js","../../src/partials.js","../../src/filters.js","../../src/runtime-utils.js"],"sourcesContent":["var helpers = {\n// No helpers are included by default for the sake of size,\n// But there's an example of a helper below\n/*\n  Date: function (args, content, blocks, options) {\n    var today = new Date()\n    var dd = today.getDate()\n    var mm = today.getMonth() + 1 // January is 0!\n    var yyyy = today.getFullYear()\n    if (dd < 10) {\n      dd = '0' + dd\n    }\n    if (mm < 10) {\n      mm = '0' + mm\n    }\n    today = mm + '/' + dd + '/' + yyyy\n    return today\n  } */\n}\n\nexport default helpers\n","var Partials = {/*\n    partialName: \"partialString\"\n*/}\n\nexport default Partials\n","var escMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n}\n\nfunction replaceChar (s) {\n  return escMap[s]\n}\n\nvar escapeRegEx = /[&<\"']/g\nvar escapeRegExTest = /[&<\"']/\n\nexport var filters = {\n  e: function (str) {\n    // To deal with XSS. Based on Escape implementations of Mustache.JS and Marko, then customized.\n    var newStr = String(str)\n    if (escapeRegExTest.test(newStr)) {\n      return newStr.replace(escapeRegEx, replaceChar)\n    } else {\n      return newStr\n    }\n  }\n}\n// Don't need a filter for unescape because that's just a flag telling Squirrelly not to escape\n\nexport var defaultFilters = {\n  /*\n  All strings are automatically passed through each of the default filters the user\n  Has set to true. This opens up a realm of possibilities.\n  */\n  // somefilter: false\n}\n\nexport var defaultFilterCache = {\n  // This is to prevent having to re-calculate default filters every time you return a filtered string\n  start: '',\n  end: ''\n}\n\nexport function setDefaultFilters (obj) {\n  if (obj === 'clear') { // If someone calls Sqrl.setDefaultFilters('clear') it clears all default filters\n    defaultFilters = {}\n  } else {\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        defaultFilters[key] = obj[key]\n      }\n    }\n  }\n  cacheDefaultFilters()\n}\n\nexport var autoEscape = true\n\nexport function autoEscaping (bool) {\n  autoEscape = bool\n  return autoEscape\n}\n\nexport function cacheDefaultFilters () {\n  defaultFilterCache = {\n    start: '',\n    end: ''\n  }\n  for (var key in defaultFilters) {\n    if (!defaultFilters.hasOwnProperty(key) || !defaultFilters[key]) continue\n    defaultFilterCache.start += 'Sqrl.F.' + key + '('\n    defaultFilterCache.end += ')'\n  }\n}\nexport function parseFiltered (initialString, filterString) {\n  var filtersArray\n  var safe = false\n  var filterStart = ''\n  var filterEnd = ''\n  if (filterString && filterString !== '') {\n    filtersArray = filterString.split('|')\n    for (var i = 0; i < filtersArray.length; i++) {\n      filtersArray[i] = filtersArray[i].trim() // Removing the spaces just in case someone put | filter| or | filter | or something similar\n      if (filtersArray[i] === '') continue\n      if (filtersArray[i] === 'safe') {\n        // If 'safe' is one of the filters, set safe to true but don't add Sqrl.F.safe\n        // Essentially, 'safe' is a flag telling Squirrelly not to autoEscape\n        safe = true\n        continue\n      }\n      filterStart = 'Sqrl.F.' + filtersArray[i] + '(' + filterStart\n      filterEnd += ')'\n    }\n  }\n  filterStart += defaultFilterCache.start\n  filterEnd += defaultFilterCache.end\n  if (!safe && autoEscape) {\n    filterStart += 'Sqrl.F.e('\n    filterEnd += ')'\n  }\n\n  return filterStart + initialString + filterEnd\n}\n\nfunction defineFilter (name, callback) {\n  filters[name] = callback\n}\n\nexport { filters as default, defineFilter }\n","import F from './filters'\nimport H from './helpers'\nimport P from './partials'\n\nexport function defineFilter (name, callback) {\n  F[name] = callback\n}\n\nexport function defineHelper (name, callback) {\n  H[name] = callback\n}\n\nexport function Render (template, options) {\n  // If the template parameter is a function, call that function with (options, Sqrl)\n  // If it's a string, first compile the string and then call the function\n  if (typeof template === 'function') {\n    return template(options, { H: H, F: F, P: P })\n  } else {\n    return 'Err: Function must be 1st arg'\n  }\n}\n\nexport function definePartial (name, str) {\n  P[name] = str\n}\n"],"names":["F","H","P"],"mappings":"AAAA,IAAI,OAAO,GAAG;;;;;;;;;;;;;;;;;;CAkBb;;AClBD,IAAI,QAAQ,GAAG;;GAEZ;;ACFH,IAAI,MAAM,GAAG;EACX,GAAG,EAAE,OAAO;EACZ,GAAG,EAAE,MAAM;EACX,GAAG,EAAE,QAAQ;EACb,GAAG,EAAE,OAAO;EACb;;AAED,SAAS,WAAW,EAAE,CAAC,EAAE;EACvB,OAAO,MAAM,CAAC,CAAC,CAAC;CACjB;;AAED,IAAI,WAAW,GAAG,UAAS;AAC3B,IAAI,eAAe,GAAG,SAAQ;;AAE9B,AAAU,IAAC,OAAO,GAAG;EACnB,CAAC,EAAE,UAAU,GAAG,EAAE;;IAEhB,IAAI,MAAM,GAAG,MAAM,CAAC,GAAG,EAAC;IACxB,IAAI,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;MAChC,OAAO,MAAM,CAAC,OAAO,CAAC,WAAW,EAAE,WAAW,CAAC;KAChD,MAAM;MACL,OAAO,MAAM;KACd;GACF;EACF;;;AAGD,AAAO,IAAI,cAAc,GAAG;;;;;;EAM3B;;AAED,AAAO,IAAI,kBAAkB,GAAG;;EAE9B,KAAK,EAAE,EAAE;EACT,GAAG,EAAE,EAAE;EACR;;AAED,AAAO,SAAS,iBAAiB,EAAE,GAAG,EAAE;EACtC,IAAI,GAAG,KAAK,OAAO,EAAE;IACnB,cAAc,GAAG,GAAE;GACpB,MAAM;IACL,KAAK,IAAI,GAAG,IAAI,GAAG,EAAE;MACnB,IAAI,GAAG,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE;QAC3B,cAAc,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,EAAC;OAC/B;KACF;GACF;EACD,mBAAmB,GAAE;CACtB;;AAED,AAAO,IAAI,UAAU,GAAG,KAAI;;AAE5B,AAAO,SAAS,YAAY,EAAE,IAAI,EAAE;EAClC,UAAU,GAAG,KAAI;EACjB,OAAO,UAAU;CAClB;;AAED,AAAO,SAAS,mBAAmB,IAAI;EACrC,kBAAkB,GAAG;IACnB,KAAK,EAAE,EAAE;IACT,GAAG,EAAE,EAAE;IACR;EACD,KAAK,IAAI,GAAG,IAAI,cAAc,EAAE;IAC9B,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE,QAAQ;IACzE,kBAAkB,CAAC,KAAK,IAAI,SAAS,GAAG,GAAG,GAAG,IAAG;IACjD,kBAAkB,CAAC,GAAG,IAAI,IAAG;GAC9B;CACF;;ACnEM,SAAS,YAAY,EAAE,IAAI,EAAE,QAAQ,EAAE;EAC5CA,OAAC,CAAC,IAAI,CAAC,GAAG,SAAQ;CACnB;;AAED,AAAO,SAAS,YAAY,EAAE,IAAI,EAAE,QAAQ,EAAE;EAC5CC,OAAC,CAAC,IAAI,CAAC,GAAG,SAAQ;CACnB;;AAED,AAAO,SAAS,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE;;;EAGzC,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE;IAClC,OAAO,QAAQ,CAAC,OAAO,EAAE,EAAE,CAAC,EAAEA,OAAC,EAAE,CAAC,EAAED,OAAC,EAAE,CAAC,EAAEE,QAAC,EAAE,CAAC;GAC/C,MAAM;IACL,OAAO,+BAA+B;GACvC;CACF;;AAED,AAAO,SAAS,aAAa,EAAE,IAAI,EAAE,GAAG,EAAE;EACxCA,QAAC,CAAC,IAAI,CAAC,GAAG,IAAG;CACd;;;;"}