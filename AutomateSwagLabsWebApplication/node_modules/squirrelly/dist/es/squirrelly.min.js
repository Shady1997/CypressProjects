var n={},e={},r=/{{ *?(?:(?:([\w$]+) *?\((.*?)\) *?([\w$]*))|(?:([\w$]+) *?\((.*?)\) *?\/)|(?:([\w$@].*?) *?((?:\| *?[\w$]+ *)*))|(?:\/ *?([\w$]+))|(?:# *?([\w$]+))|(?:!\-\-[^]+?\-\-)) *?}}\n?/g,t={s:"{{",e:"}}"},a=/@(?:((?:\.\.\/)+)|([\w$]+):)?/g,i=r,l=t;function s(n){o(n[0],n[1]),r=i,t=l}function o(n,e){var r=n+i.source.slice(l.s.length,0-(l.e.length+3))+e+"\\n?",t=i.lastIndex;l={s:n,e:e},(i=RegExp(r,"g")).lastIndex=t}function u(n,e,r){return n.replace(a,function(n,t,a){return"hvals"+(t&&t.length?e[r-t.length/3-1].id:a||"")+"."})}var c={if:{helperStart:function(n){return"if("+n+"){"},helperEnd:function(){return"}"},blocks:{else:function(){return"}else{"}}},each:{helperStart:function(n,e){return"for(var i=0;i<"+n+".length; i++){tR+=(function(hvals){var tR='';var hvals"+e+"=hvals;"},helperEnd:function(n){return"return tR})({this:"+n+"[i],index:i})};"}},foreach:{helperStart:function(n,e){return"for(var key in "+n+"){if(!"+n+".hasOwnProperty(key)) continue;tR+=(function(hvals){var tR='';var hvals"+e+"=hvals;"},helperEnd:function(n){return"return tR})({this:"+n+"[key], key: key})};"}},log:{selfClosing:function(n){return"console.log("+n+");"}},tags:{selfClosing:function(n){return o(n.slice(0,n.indexOf(",")).trim(),n.slice(n.indexOf(",")+1).trim()),""}},js:{selfClosing:function(n){return n+";"}}},f={"&":"&amp;","<":"&lt;",'"':"&quot;","'":"&#39;"};function v(n){return f[n]}var h=/[&<"']/g,p=/[&<"']/,d={e:function(n){var e=String(n);return p.test(e)?e.replace(h,v):e}},g={},w={start:"",end:""};function y(n){if("clear"===n)g={};else for(var e in n)n.hasOwnProperty(e)&&(g[e]=n[e]);!function(){for(var n in w={start:"",end:""},g)g.hasOwnProperty(n)&&g[n]&&(w.start+="Sqrl.F."+n+"(",w.end+=")")}()}var R=!0;function x(n){return R=n}function m(n,e){var r,t=!1,a="",i="";if(e&&""!==e){r=e.split("|");for(var l=0;l<r.length;l++)r[l]=r[l].trim(),""!==r[l]&&("safe"!==r[l]?(a="Sqrl.F."+r[l]+"("+a,i+=")"):t=!0)}return a+=w.start,i+=w.end,!t&&R&&(a+="Sqrl.F.e(",i+=")"),a+n+i}function P(n){var a,s=0,o="var tR='';",f=[],v=-1,h=0,p={};function d(e){s!==e&&(o+="tR+='"+n.slice(s,e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"';")}function g(n,e){var r=u(n,f,v);return"@"===n[0]?m(r,e):m("options."+r,e)}for(l=t,(i=r).lastIndex=0;null!==(a=i.exec(n));)if(d(a.index),s=a[0].length+a.index,a[1]){var w=a[3];""!==w&&null!==w||(w=h,h++);var y=c.hasOwnProperty(a[1]);v+=1;var R=a[2]||"";R=u(R,f,v),y||(R="["+R+"]");var x={name:a[1],id:w,params:R,native:y};f[v]=x,y?(o+=c[a[1]].helperStart(R,w),s=i.lastIndex):o+="tR+=Sqrl.H."+a[1]+"("+R+",function(hvals){var hvals"+w+"=hvals;var tR='';"}else if(a[4]){var P=a[5]||"";if(P=u(P,f,v),"include"===a[4]){var S=n.slice(0,a.index),O=n.slice(a.index+a[0].length),$=P.replace(/'|"/g,""),k=e[$];n=S+k+O,s=i.lastIndex=a.index}else c.hasOwnProperty(a[4])&&c[a[4]].hasOwnProperty("selfClosing")?(o+=c[a[4]].selfClosing(P),s=i.lastIndex):o+="tR+=Sqrl.H."+a[4]+"("+P+");"}else if(a[6])o+="tR+="+g(a[6],a[7])+";";else if(a[8]){var F=f[v];F&&F.name===a[8]?(v-=1,!0===F.native?o+=c[F.name].helperEnd(F.params,F.id):p[F.id]?o+="return tR}});":o+="return tR});"):console.error("Helper beginning & end don't match.")}else if(a[9]){var q=f[v];if(q.native){var H=c[q.name];H.blocks&&H.blocks[a[9]]?(o+=H.blocks[a[9]](q.id),s=i.lastIndex):console.warn("Native helper '%s' doesn't accept that block.",q.name)}else p[q.id]?o+="return tR},"+a[9]+":function(hvals){var hvals"+q.id+"=hvals;var tR='';":(o+="return tR},{"+a[9]+":function(hvals){var hvals"+q.id+"=hvals;var tR='';",p[q.id]=!0)}return d(n.length),o+="return tR",new Function("options","Sqrl",o.replace(/\n/g,"\\n").replace(/\r/g,"\\r"))}function S(n,e){d[n]=e}function O(e,r){n[e]=r}function $(n,e){c[n]=e}function k(r,t){return"function"==typeof r?r(t,{H:n,F:d,P:e}):"string"==typeof r?H(t,r)(t,{H:n,F:d,P:e}):void 0}function F(n,r){e[n]=r}var q={};function H(n,e){var r=n.$file,t=n.$name,a=n.$cache;if(r){var i=require("fs");return!1!==a?(q.hasOwnProperty(r)||(q[r]=P(i.readFileSync(r,"utf8"))),q[r]):P(i.readFileSync(r,"utf8"))}return"string"==typeof e?t&&!1!==a?(q.hasOwnProperty(t)||(q[t]=P(e)),q[t]):!0===a?(q.hasOwnProperty(e)||(q[e]=P(e)),q[e]):P(e):t&&!1!==a&&q.hasOwnProperty(t)?q[t]:"No template"}function I(r,t){return t.$file=r,H(t)(t,{H:n,F:d,P:e})}function b(n,e,r){return r(null,I(n,e))}export{P as Compile,d as F,n as H,e as P,k as Render,b as __express,x as autoEscaping,s as defaultTags,S as defineFilter,O as defineHelper,$ as defineNativeHelper,F as definePartial,H as load,I as renderFile,y as setDefaultFilters};
//# sourceMappingURL=squirrelly.min.js.map
